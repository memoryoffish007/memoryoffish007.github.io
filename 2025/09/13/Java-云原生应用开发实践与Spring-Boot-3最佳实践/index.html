
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8" />
    <title>Java 云原生应用开发实践与 Spring Boot 3 最佳实践 | 翎羽的个人博客</title>
    <meta name="author" content="翎羽" />
    <meta name="description" content="一位程序员的技术分享与生活碎碎念，涵盖Java后端开发、前端技术、人工智能、和大数据领域、读书心得等" />
    <meta name="keywords" content="技术博客,Java,前端开发,读书,生活随笔" />
    <meta
        name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"
    />
    <link rel="icon" href="/images/avatar.jpg" />
    <link rel="preconnect" href="https://s4.zstatic.net" />
<script src="https://s4.zstatic.net/ajax/libs/vue/3.3.7/vue.global.prod.min.js"></script>
<link rel="stylesheet" href="https://s4.zstatic.net/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
<link rel="preconnect" href="https://fonts.googleapis.cn" />
<link rel="preconnect" href="https://fonts.gstatic.cn" crossorigin />
<link
    rel="stylesheet"
    href="https://fonts.googleapis.cn/css2?family=Fira+Code:wght@400;500;600;700&family=Lexend:wght@400;500;600;700;800;900&family=Noto+Sans+SC:wght@400;500;600;700;800;900&display=swap"
/>
<script> const mixins = {}; </script>

<script src="https://polyfill.alicdn.com/v3/polyfill.min.js?features=default"></script>


<script src="https://s4.zstatic.net/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://s4.zstatic.net/ajax/libs/highlightjs-line-numbers.js/2.8.0/highlightjs-line-numbers.min.js"></script>
<link
    rel="stylesheet"
    href="https://s4.zstatic.net/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css"
/>
<script src="/js/lib/highlight.js"></script>



<script src="/js/lib/preview.js"></script>









<link rel="stylesheet" href="/css/main.css" />

<meta name="generator" content="Hexo 7.3.0"></head>
<body>
    <div id="layout">
        <transition name="fade">
            <div id="loading" v-show="loading">
                <div id="loading-circle">
                    <h2>LOADING</h2>
                    <p>加载过慢请开启缓存 浏览器默认开启</p>
                    <img src="/images/loading.gif" />
                </div>
            </div>
        </transition>
        <div id="menu" :class="{ hidden: hiddenMenu, 'menu-color': menuColor}">
    <nav id="desktop-menu">
        <a class="title" href="/">
            <span>翎羽的个人博客</span>
        </a>
        
        <a href="/">
            <i class="fa-solid fa-house fa-fw"></i>
            <span>&ensp;Home</span>
        </a>
        
        <a href="/about">
            <i class="fa-solid fa-id-card fa-fw"></i>
            <span>&ensp;About</span>
        </a>
        
        <a href="/archives">
            <i class="fa-solid fa-box-archive fa-fw"></i>
            <span>&ensp;Archives</span>
        </a>
        
        <a href="/categories">
            <i class="fa-solid fa-bookmark fa-fw"></i>
            <span>&ensp;Categories</span>
        </a>
        
        <a href="/tags">
            <i class="fa-solid fa-tags fa-fw"></i>
            <span>&ensp;Tags</span>
        </a>
        
        <a href="/notes">
            <i class="fa-solid fa-book-open fa-fw"></i>
            <span>&ensp;Notes</span>
        </a>
        
        <a href="/projects">
            <i class="fa-solid fa-briefcase fa-fw"></i>
            <span>&ensp;Projects</span>
        </a>
        
    </nav>
    <nav id="mobile-menu">
        <div class="title" @click="showMenuItems = !showMenuItems">
            <i class="fa-solid fa-bars fa-fw"></i>
            <span>&emsp;翎羽的个人博客</span>
        </div>
        <transition name="slide">
            <div class="items" v-show="showMenuItems">
                
                <a href="/">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-house fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Home</div>
                    </div>
                </a>
                
                <a href="/about">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-id-card fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">About</div>
                    </div>
                </a>
                
                <a href="/archives">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-box-archive fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Archives</div>
                    </div>
                </a>
                
                <a href="/categories">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-bookmark fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Categories</div>
                    </div>
                </a>
                
                <a href="/tags">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-tags fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Tags</div>
                    </div>
                </a>
                
                <a href="/notes">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-book-open fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Notes</div>
                    </div>
                </a>
                
                <a href="/projects">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-briefcase fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Projects</div>
                    </div>
                </a>
                
            </div>
        </transition>
    </nav>
</div>
<transition name="fade">
    <div id="menu-curtain" @click="showMenuItems = !showMenuItems" v-show="showMenuItems"></div>
</transition>

        <div id="main" :class="loading ? 'into-enter-from': 'into-enter-active'">
            <div class="article">
    <div>
        <h1>Java 云原生应用开发实践与 Spring Boot 3 最佳实践</h1>
    </div>
    <div class="info">
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2025/9/13
        </span>
        
        <span class="category">
            <a href="/categories/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/">
                <span class="icon">
                    <i class="fa-solid fa-bookmark fa-fw"></i>
                </span>
                后端开发
            </a>
        </span>
        
        
        <span class="tags">
            <span class="icon">
                <i class="fa-solid fa-tags fa-fw"></i>
            </span>
            
            
            <span class="tag">
                
                <a href="/tags/Java/" style="color: #ff7d73">
                    Java
                </a>
            </span>
            
            <span class="tag">
                
                <a href="/tags/Spring-Boot/" style="color: #ffa2c4">
                    Spring Boot
                </a>
            </span>
            
            <span class="tag">
                
                <a href="/tags/%E4%BA%91%E5%8E%9F%E7%94%9F/" style="color: #03a9f4">
                    云原生
                </a>
            </span>
            
            <span class="tag">
                
                <a href="/tags/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/" style="color: #00a596">
                    后端开发
                </a>
            </span>
            
        </span>
        
    </div>
    
    <div class="content" v-pre>
        <h1 id="Java-云原生应用开发实践与-Spring-Boot-3-最佳实践"><a href="#Java-云原生应用开发实践与-Spring-Boot-3-最佳实践" class="headerlink" title="Java 云原生应用开发实践与 Spring Boot 3 最佳实践"></a>Java 云原生应用开发实践与 Spring Boot 3 最佳实践</h1><p>随着云原生技术的快速发展，Java 应用开发也在经历着深刻的变革。本文将介绍 Java 云原生应用开发的最新趋势，并结合 Spring Boot 3 提供一套完整的实践指南和最佳实践。</p>
<h2 id="一、云原生应用的核心概念"><a href="#一、云原生应用的核心概念" class="headerlink" title="一、云原生应用的核心概念"></a>一、云原生应用的核心概念</h2><h3 id="什么是云原生"><a href="#什么是云原生" class="headerlink" title="什么是云原生"></a>什么是云原生</h3><p>云原生应用是专为云环境设计的应用程序，充分利用云计算的弹性、可扩展性和分布式特性。根据云原生计算基金会 (CNCF) 的定义，云原生技术支持应用程序在现代、动态环境中构建和运行，如公共云、私有云和混合云。</p>
<p><img src="/images/placeholder.svg" alt="云原生应用架构图"></p>
<h3 id="云原生的关键特性"><a href="#云原生的关键特性" class="headerlink" title="云原生的关键特性"></a>云原生的关键特性</h3><ul>
<li><strong>容器化</strong>：应用程序及其依赖被封装在轻量级容器中</li>
<li><strong>微服务</strong>：应用程序被拆分为独立部署的微服务</li>
<li><strong>DevOps</strong>：开发和运维流程紧密集成</li>
<li><strong>持续集成&#x2F;持续部署</strong>：自动化构建、测试和部署流程</li>
<li><strong>弹性伸缩</strong>：根据负载自动调整资源</li>
<li><strong>服务网格</strong>：处理服务间通信的基础设施层</li>
</ul>
<h2 id="二、Spring-Boot-3-与云原生"><a href="#二、Spring-Boot-3-与云原生" class="headerlink" title="二、Spring Boot 3 与云原生"></a>二、Spring Boot 3 与云原生</h2><p>Spring Boot 3 提供了丰富的云原生功能，让 Java 开发者能够更轻松地构建云原生应用。</p>
<h3 id="Spring-Boot-3-的云原生特性"><a href="#Spring-Boot-3-的云原生特性" class="headerlink" title="Spring Boot 3 的云原生特性"></a>Spring Boot 3 的云原生特性</h3><ol>
<li><p><strong>GraalVM 原生镜像支持</strong><br>Spring Boot 3 提供了对 GraalVM 原生镜像的官方支持，可以将 Spring 应用编译为原生可执行文件，显著提高启动速度和降低内存占用。</p>
</li>
<li><p><strong>对 Kubernetes 的增强支持</strong><br>Spring Boot 3 包含了对 Kubernetes 的原生支持，简化了在 Kubernetes 环境中的部署和管理。</p>
</li>
<li><p><strong>与 Spring Cloud 2022.0 版本的集成</strong><br>提供了服务发现、配置管理、负载均衡等云原生应用所需的关键功能。</p>
</li>
</ol>
<h2 id="三、构建云原生-Spring-Boot-3-应用"><a href="#三、构建云原生-Spring-Boot-3-应用" class="headerlink" title="三、构建云原生 Spring Boot 3 应用"></a>三、构建云原生 Spring Boot 3 应用</h2><h3 id="1-准备开发环境"><a href="#1-准备开发环境" class="headerlink" title="1. 准备开发环境"></a>1. 准备开发环境</h3><p>首先，我们需要准备以下开发工具和环境：</p>
<ul>
<li>JDK 17 或更高版本</li>
<li>Maven 3.8+ 或 Gradle 7.5+</li>
<li>Docker</li>
<li>Kubernetes 集群（开发环境可使用 Minikube、kind 或 Docker Desktop）</li>
<li>IDE（推荐 IntelliJ IDEA 或 Eclipse）</li>
</ul>
<h3 id="2-创建-Spring-Boot-3-项目"><a href="#2-创建-Spring-Boot-3-项目" class="headerlink" title="2. 创建 Spring Boot 3 项目"></a>2. 创建 Spring Boot 3 项目</h3><p>我们可以使用 Spring Initializr 创建一个新的 Spring Boot 3 项目，添加必要的依赖。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用 Spring Initializr CLI 创建项目</span></span><br><span class="line">spring init --dependencies=web,actuator,data-jpa,postgresql,cloud-starter-kubernetes-fabric8 my-cloud-native-app</span><br></pre></td></tr></table></figure>

<p>或者在 <a target="_blank" rel="noopener" href="https://start.spring.io/">Spring Initializr 网站</a> 上创建项目。</p>
<h3 id="3-实现基本功能"><a href="#3-实现基本功能" class="headerlink" title="3. 实现基本功能"></a>3. 实现基本功能</h3><p>创建一个简单的 REST API 和数据访问层：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 实体类</span></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Table(name = &quot;products&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Product</span> &#123;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String description;</span><br><span class="line">    <span class="keyword">private</span> BigDecimal price;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// getter 和 setter 方法</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 仓库接口</span></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ProductRepository</span> <span class="keyword">extends</span> <span class="title class_">JpaRepository</span>&lt;Product, Long&gt; &#123;</span><br><span class="line">    List&lt;Product&gt; <span class="title function_">findByPriceLessThan</span><span class="params">(BigDecimal price)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// REST 控制器</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/api/products&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProductController</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> ProductRepository productRepository;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ProductController</span><span class="params">(ProductRepository productRepository)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.productRepository = productRepository;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@GetMapping</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Product&gt; <span class="title function_">getAllProducts</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> productRepository.findAll();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@GetMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseEntity&lt;Product&gt; <span class="title function_">getProductById</span><span class="params">(<span class="meta">@PathVariable</span> Long id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> productRepository.findById(id)</span><br><span class="line">            .map(ResponseEntity::ok)</span><br><span class="line">            .orElse(ResponseEntity.notFound().build());</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@PostMapping</span></span><br><span class="line">    <span class="keyword">public</span> Product <span class="title function_">createProduct</span><span class="params">(<span class="meta">@RequestBody</span> Product product)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> productRepository.save(product);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-添加云原生配置"><a href="#4-添加云原生配置" class="headerlink" title="4. 添加云原生配置"></a>4. 添加云原生配置</h3><h4 id="4-1-配置-Actuator"><a href="#4-1-配置-Actuator" class="headerlink" title="4.1 配置 Actuator"></a>4.1 配置 Actuator</h4><p>Spring Boot Actuator 提供了监控和管理生产环境应用程序的功能：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># application.yml</span></span><br><span class="line"><span class="attr">management:</span></span><br><span class="line">  <span class="attr">endpoints:</span></span><br><span class="line">    <span class="attr">web:</span></span><br><span class="line">      <span class="attr">exposure:</span></span><br><span class="line">        <span class="attr">include:</span> <span class="string">health,info,metrics,prometheus</span></span><br><span class="line">  <span class="attr">endpoint:</span></span><br><span class="line">    <span class="attr">health:</span></span><br><span class="line">      <span class="attr">show-details:</span> <span class="string">always</span></span><br><span class="line">  <span class="attr">metrics:</span></span><br><span class="line">    <span class="attr">export:</span></span><br><span class="line">      <span class="attr">prometheus:</span></span><br><span class="line">        <span class="attr">enabled:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<h4 id="4-2-配置-Kubernetes"><a href="#4-2-配置-Kubernetes" class="headerlink" title="4.2 配置 Kubernetes"></a>4.2 配置 Kubernetes</h4><p>添加 Kubernetes 相关配置，使应用能够更好地在 Kubernetes 环境中运行：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># application-k8s.yml</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">kubernetes:</span></span><br><span class="line">      <span class="attr">config:</span></span><br><span class="line">        <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">secrets:</span></span><br><span class="line">        <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:postgresql://$&#123;DB_HOST:postgres&#125;:$&#123;DB_PORT:5432&#125;/$&#123;DB_NAME:products&#125;</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">$&#123;DB_USERNAME&#125;</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">$&#123;DB_PASSWORD&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="四、容器化应用"><a href="#四、容器化应用" class="headerlink" title="四、容器化应用"></a>四、容器化应用</h2><h3 id="1-创建-Dockerfile"><a href="#1-创建-Dockerfile" class="headerlink" title="1. 创建 Dockerfile"></a>1. 创建 Dockerfile</h3><p>为应用创建 Dockerfile，支持标准 JVM 运行时和 GraalVM 原生镜像两种方式：</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 构建阶段</span></span><br><span class="line"><span class="keyword">FROM</span> maven:<span class="number">3.8</span>.<span class="number">6</span>-eclipse-temurin-<span class="number">17</span> AS builder</span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /build</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> pom.xml .</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> mvn dependency:go-offline</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> src ./src</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> mvn clean package -DskipTests</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 运行阶段 - JVM 版本</span></span><br><span class="line"><span class="keyword">FROM</span> eclipse-temurin:<span class="number">17</span>-jre-alpine</span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /app</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> --from=builder /build/target/*.jar app.jar</span></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">8080</span></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="language-bash"> [<span class="string">&quot;java&quot;</span>, <span class="string">&quot;-jar&quot;</span>, <span class="string">&quot;app.jar&quot;</span>]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果需要 GraalVM 原生镜像，取消下面注释并注释上面的运行阶段</span></span><br><span class="line"><span class="comment"># FROM ghcr.io/graalvm/jdk:ol8-java17</span></span><br><span class="line"><span class="comment"># WORKDIR /app</span></span><br><span class="line"><span class="comment"># COPY --from=builder /build/target/my-cloud-native-app app</span></span><br><span class="line"><span class="comment"># EXPOSE 8080</span></span><br><span class="line"><span class="comment"># ENTRYPOINT [&quot;./app&quot;]</span></span><br></pre></td></tr></table></figure>

<h3 id="2-构建和运行-Docker-镜像"><a href="#2-构建和运行-Docker-镜像" class="headerlink" title="2. 构建和运行 Docker 镜像"></a>2. 构建和运行 Docker 镜像</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 构建 Docker 镜像</span></span><br><span class="line">docker build -t my-cloud-native-app .</span><br><span class="line"></span><br><span class="line"><span class="comment"># 运行 Docker 容器</span></span><br><span class="line">docker run -p 8080:8080 my-cloud-native-app</span><br></pre></td></tr></table></figure>

<h2 id="五、部署到-Kubernetes"><a href="#五、部署到-Kubernetes" class="headerlink" title="五、部署到 Kubernetes"></a>五、部署到 Kubernetes</h2><h3 id="1-创建-Kubernetes-配置文件"><a href="#1-创建-Kubernetes-配置文件" class="headerlink" title="1. 创建 Kubernetes 配置文件"></a>1. 创建 Kubernetes 配置文件</h3><p>创建 deployment.yaml 文件，定义应用的部署配置：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># deployment.yaml</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">my-cloud-native-app</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">3</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">app:</span> <span class="string">my-cloud-native-app</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">app:</span> <span class="string">my-cloud-native-app</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">my-cloud-native-app</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">my-cloud-native-app:latest</span></span><br><span class="line">        <span class="attr">ports:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">8080</span></span><br><span class="line">        <span class="attr">livenessProbe:</span></span><br><span class="line">          <span class="attr">httpGet:</span></span><br><span class="line">            <span class="attr">path:</span> <span class="string">/actuator/health/liveness</span></span><br><span class="line">            <span class="attr">port:</span> <span class="number">8080</span></span><br><span class="line">          <span class="attr">initialDelaySeconds:</span> <span class="number">30</span></span><br><span class="line">          <span class="attr">periodSeconds:</span> <span class="number">10</span></span><br><span class="line">        <span class="attr">readinessProbe:</span></span><br><span class="line">          <span class="attr">httpGet:</span></span><br><span class="line">            <span class="attr">path:</span> <span class="string">/actuator/health/readiness</span></span><br><span class="line">            <span class="attr">port:</span> <span class="number">8080</span></span><br><span class="line">          <span class="attr">initialDelaySeconds:</span> <span class="number">5</span></span><br><span class="line">          <span class="attr">periodSeconds:</span> <span class="number">5</span></span><br><span class="line">        <span class="attr">resources:</span></span><br><span class="line">          <span class="attr">limits:</span></span><br><span class="line">            <span class="attr">memory:</span> <span class="string">&quot;1Gi&quot;</span></span><br><span class="line">            <span class="attr">cpu:</span> <span class="string">&quot;500m&quot;</span></span><br><span class="line">          <span class="attr">requests:</span></span><br><span class="line">            <span class="attr">memory:</span> <span class="string">&quot;512Mi&quot;</span></span><br><span class="line">            <span class="attr">cpu:</span> <span class="string">&quot;250m&quot;</span></span><br><span class="line">        <span class="attr">env:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">DB_HOST</span></span><br><span class="line">          <span class="attr">valueFrom:</span></span><br><span class="line">            <span class="attr">configMapKeyRef:</span></span><br><span class="line">              <span class="attr">name:</span> <span class="string">app-config</span></span><br><span class="line">              <span class="attr">key:</span> <span class="string">db-host</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">DB_USERNAME</span></span><br><span class="line">          <span class="attr">valueFrom:</span></span><br><span class="line">            <span class="attr">secretKeyRef:</span></span><br><span class="line">              <span class="attr">name:</span> <span class="string">app-secrets</span></span><br><span class="line">              <span class="attr">key:</span> <span class="string">db-username</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">DB_PASSWORD</span></span><br><span class="line">          <span class="attr">valueFrom:</span></span><br><span class="line">            <span class="attr">secretKeyRef:</span></span><br><span class="line">              <span class="attr">name:</span> <span class="string">app-secrets</span></span><br><span class="line">              <span class="attr">key:</span> <span class="string">db-password</span></span><br></pre></td></tr></table></figure>

<p>创建 service.yaml 文件，定义服务访问配置：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># service.yaml</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Service</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">my-cloud-native-app</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">app:</span> <span class="string">my-cloud-native-app</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">port:</span> <span class="number">80</span></span><br><span class="line">    <span class="attr">targetPort:</span> <span class="number">8080</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">LoadBalancer</span></span><br></pre></td></tr></table></figure>

<h3 id="2-部署应用到-Kubernetes"><a href="#2-部署应用到-Kubernetes" class="headerlink" title="2. 部署应用到 Kubernetes"></a>2. 部署应用到 Kubernetes</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建配置映射和密钥</span></span><br><span class="line">kubectl create configmap app-config --from-literal=db-host=postgres</span><br><span class="line">kubectl create secret generic app-secrets --from-literal=db-username=postgres --from-literal=db-password=password</span><br><span class="line"></span><br><span class="line"><span class="comment"># 部署应用</span></span><br><span class="line">kubectl apply -f deployment.yaml</span><br><span class="line">kubectl apply -f service.yaml</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看部署状态</span></span><br><span class="line">kubectl get pods</span><br><span class="line">kubectl get services</span><br></pre></td></tr></table></figure>

<h2 id="六、实现-CI-CD-流水线"><a href="#六、实现-CI-CD-流水线" class="headerlink" title="六、实现 CI&#x2F;CD 流水线"></a>六、实现 CI&#x2F;CD 流水线</h2><h3 id="创建-GitHub-Actions-工作流"><a href="#创建-GitHub-Actions-工作流" class="headerlink" title="创建 GitHub Actions 工作流"></a>创建 GitHub Actions 工作流</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># .github/workflows/ci-cd.yml</span></span><br><span class="line"><span class="attr">name:</span> <span class="string">Java</span> <span class="string">CI/CD</span> <span class="string">with</span> <span class="string">Maven</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span> [ <span class="string">main</span> ]</span><br><span class="line">  <span class="attr">pull_request:</span></span><br><span class="line">    <span class="attr">branches:</span> [ <span class="string">main</span> ]</span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">build:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    </span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v3</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Set</span> <span class="string">up</span> <span class="string">JDK</span> <span class="number">17</span></span><br><span class="line">      <span class="attr">uses:</span> <span class="string">actions/setup-java@v3</span></span><br><span class="line">      <span class="attr">with:</span></span><br><span class="line">        <span class="attr">java-version:</span> <span class="string">&#x27;17&#x27;</span></span><br><span class="line">        <span class="attr">distribution:</span> <span class="string">&#x27;temurin&#x27;</span></span><br><span class="line">        <span class="attr">cache:</span> <span class="string">maven</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Build</span> <span class="string">with</span> <span class="string">Maven</span></span><br><span class="line">      <span class="attr">run:</span> <span class="string">mvn</span> <span class="string">-B</span> <span class="string">package</span> <span class="string">--file</span> <span class="string">pom.xml</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Build</span> <span class="string">and</span> <span class="string">push</span> <span class="string">Docker</span> <span class="string">image</span></span><br><span class="line">      <span class="attr">uses:</span> <span class="string">docker/build-push-action@v4</span></span><br><span class="line">      <span class="attr">with:</span></span><br><span class="line">        <span class="attr">context:</span> <span class="string">.</span></span><br><span class="line">        <span class="attr">push:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">tags:</span> <span class="string">myregistry.io/my-cloud-native-app:$&#123;&#123;</span> <span class="string">github.sha</span> <span class="string">&#125;&#125;</span></span><br><span class="line">      <span class="attr">env:</span></span><br><span class="line">        <span class="attr">DOCKER_HUB_USERNAME:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.DOCKER_HUB_USERNAME</span> <span class="string">&#125;&#125;</span></span><br><span class="line">        <span class="attr">DOCKER_HUB_ACCESS_TOKEN:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.DOCKER_HUB_ACCESS_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Deploy</span> <span class="string">to</span> <span class="string">Kubernetes</span></span><br><span class="line">      <span class="attr">uses:</span> <span class="string">azure/k8s-deploy@v4</span></span><br><span class="line">      <span class="attr">with:</span></span><br><span class="line">        <span class="attr">namespace:</span> <span class="string">default</span></span><br><span class="line">        <span class="attr">manifests:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          k8s/deployment.yaml</span></span><br><span class="line"><span class="string">          k8s/service.yaml</span></span><br><span class="line"><span class="string"></span>        <span class="attr">images:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          myregistry.io/my-cloud-native-app:$&#123;&#123; github.sha &#125;&#125;</span></span><br><span class="line"><span class="string"></span>        <span class="attr">imagepullsecrets:</span> <span class="string">|</span></span><br><span class="line">          <span class="string">registry-credentials</span></span><br></pre></td></tr></table></figure>

<h2 id="七、云原生应用最佳实践"><a href="#七、云原生应用最佳实践" class="headerlink" title="七、云原生应用最佳实践"></a>七、云原生应用最佳实践</h2><h3 id="1-健康检查和弹性设计"><a href="#1-健康检查和弹性设计" class="headerlink" title="1. 健康检查和弹性设计"></a>1. 健康检查和弹性设计</h3><ul>
<li>实现 liveness 和 readiness 探针</li>
<li>设计断路器模式处理故障</li>
<li>使用重试机制处理暂时性错误</li>
</ul>
<h3 id="2-配置管理最佳实践"><a href="#2-配置管理最佳实践" class="headerlink" title="2. 配置管理最佳实践"></a>2. 配置管理最佳实践</h3><ul>
<li>外部化配置，避免硬编码</li>
<li>使用 Kubernetes ConfigMaps 和 Secrets 管理配置</li>
<li>实现配置热重载</li>
</ul>
<h3 id="3-监控和可观测性"><a href="#3-监控和可观测性" class="headerlink" title="3. 监控和可观测性"></a>3. 监控和可观测性</h3><ul>
<li>集成 Prometheus 和 Grafana 进行监控</li>
<li>使用 Spring Boot Actuator 暴露健康和指标端点</li>
<li>实现分布式追踪</li>
</ul>
<h3 id="4-安全性考虑"><a href="#4-安全性考虑" class="headerlink" title="4. 安全性考虑"></a>4. 安全性考虑</h3><ul>
<li>实施适当的认证和授权机制</li>
<li>保护敏感数据</li>
<li>定期更新依赖以修复安全漏洞</li>
</ul>
<h2 id="八、总结"><a href="#八、总结" class="headerlink" title="八、总结"></a>八、总结</h2><p>云原生应用开发代表了 Java 应用开发的未来方向，而 Spring Boot 3 为开发者提供了强大的工具和框架支持。通过本文介绍的实践指南，您可以快速上手云原生应用开发，并构建高效、可靠、可扩展的现代 Java 应用。</p>
<p>随着云原生技术的不断发展，我们可以期待 Spring Boot 社区会继续提供更多创新功能，进一步简化云原生应用开发过程。作为 Java 开发者，及时掌握这些前沿技术，将有助于我们在激烈的技术竞争中保持优势。</p>

    </div>
    
    
    
    
    
    
    
</div>

            <footer id="footer">
    <div id="footer-wrap">
        <div>
            &copy;
            2022 - 2025 翎羽的个人博客
            <span id="footer-icon">
                <i class="fa-solid fa-font-awesome fa-fw"></i>
            </span>
            &commat;翎羽
        </div>
        <div>
            Based on the <a target="_blank" rel="noopener" href="https://hexo.io">Hexo Engine</a> &amp;
            <a target="_blank" rel="noopener" href="https://github.com/theme-particlex/hexo-theme-particlex">ParticleX Theme</a>
        </div>
        
    </div>
</footer>

        </div>
        
        <transition name="fade">
            <div id="preview" ref="preview" v-show="previewShow">
                <img id="preview-content" ref="previewContent" />
            </div>
        </transition>
        
    </div>
    <script src="/js/main.js"></script>
    
    




    
</body>
</html>
